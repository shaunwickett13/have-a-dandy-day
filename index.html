<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html;" charset="UTF-8" />
    <meta name="description" content="Wherever you are... whoever you are... have a dandy day!" />
    <meta name="keywords" content="dandy, day, positivity, greetings, well wishes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="theme-color" content="black" />

    <meta property="og:title" content="Have A Dandy Day!" />
    <meta property="og:url" content="https://haveadandyday.com" />
    <meta property="og:description" content="Wherever you are... whoever you are... have a dandy day!">
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://haveadandyday.com/image/share.png" />
    <meta property="og:image:alt" content="A man's head peeks out the bottom of the frame and there is text above him saying 'Have A Dandy Day!'" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1024" />
    <meta property="og:image:height" content="1024" />

    <link rel="apple-touch-icon" sizes="180x180" href="image/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="image/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="image/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa">
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />

    <script>
        class DandyDayController {
            static focusSchedule = [
                [3.5, "have"],
                [4.0, "a"],
                [4.5, "dan"],
                [4.75, "dy"],
                [5.0, "day"],
                [10.0, "have"],
                [10.5, "a"],
                [11, "dan"],
                [11.25, "dy"],
                [11.5, "day"],
                [23.0, "have"],
                [23.5, "a"],
                [24, "dan"],
                [24.25, "dy"],
                [24.5, "day"],
                [24.75, "have"],
                [25.25, "a"],
                [25.75, "dan"],
                [26, "dy"],
                [26.25, "day"],
            ]

            static sharePayload = {
                title: "Have A Dandy Day!",
                text: "Whoever you are... Wherever you are... have a dandy day!",
                url: "https://haveadandyday.com"
            }
            constructor() {
                addEventListener("load", this._initialize)
            }

            getAudio() {
                return document.getElementById("jingle")
            }

            handleAudioTimeUpdate() {
                const audioSampleTolerance = 500
                const {currentTime, duration} = this.getAudio()

                for (const [time, selector] of DandyDayController.focusSchedule) {
                    const timeUntilFocus = (time - currentTime) * 1000
                    if (timeUntilFocus <= audioSampleTolerance) {
                        setTimeout(() => document.querySelector(`#${selector}.word`).classList.add("focus"), timeUntilFocus)
                        setTimeout(() => document.querySelector(`#${selector}.word`).classList.remove("focus"), timeUntilFocus + 1000)
                    }
                }

                document.getElementById("progress-value").style.width = `${100 - ((currentTime / duration) * 100)}%`

                if (currentTime >= 25 && document.querySelectorAll(".firework").length === 0) {
                    const numFireworks = 8;
                    const body = document.querySelector("body")
                    Array.from(Array(numFireworks).keys()).map(i => {
                        const firework = document.createElement("div")
                        firework.classList.add("firework")
                        firework.classList.add(`f${i + 1}`)
                        return firework
                    }).forEach(firework => body.appendChild(firework))
                }
            }

            startExperience() {
                document.querySelector("body").classList.add("active")
                setTimeout(() => document.querySelector("#splash").classList.add("hide"), 1000)

                this.getAudio().play();
            }

            stopExperience() {
                document.getElementById("splash").classList.remove("hide")
                document.body.classList.remove("active")
                document.querySelectorAll('.firework').forEach(e => e.remove());

                const audio = this.getAudio()

                audio.stop()
                audio.currentTime = 0
            }

            showLabel(element) {
                const label = document.querySelector(`label[for=${element.id}]`)
                label.classList.remove("hide")
            }

            hideLabel(element) {
                const label = document.querySelector(`label[for=${element.id}]`)
                label.classList.add("hide")
            }

            showSplash() {
                document.getElementById("splash").classList.remove("show-misc")
            }

            showShare() {
                navigator.share(DandyDayController.sharePayload)
            }

            showQuote() {
                this._showMisc()
                document.getElementById("quote-section").classList.remove("hide")
            }

            showFaq() {
                this._showMisc()
                document.getElementById("faq-section").classList.remove("hide")
            }

            showAbout() {
                this._showMisc()
                document.getElementById("about-section").classList.remove("hide")
            }

            _showMisc() {
                Array.from(document.querySelectorAll("#misc-panel section")).forEach(element => element.classList.add("hide"))
                document.getElementById("splash").classList.add("show-misc")
            }

            _initialize() {
                if (window.location.href.includes("localhost")) {
                    const livejs = document.createElement("script");
                    livejs.setAttribute("src", "https://livejs.com/live.js")
                    livejs.setAttribute("type", "text/javascript")
                    document.head.appendChild(livejs)
                }

                if (!navigator.canShare || !navigator.canShare(DandyDayController.sharePayload)) {
                    document.getElementById("share-button").classList.add("hide")
                }
                document.getElementById("control-panel").classList.remove("hide")
            }
        }

        const dandyDayController = new DandyDayController();
    </script>

    <title>Have A Dandy Day!</title>
</head>
<body>
    <main id="splash" class="background-container">
        <nav id="control-panel" class="hide">
            <button id="start-button" onclick="dandyDayController.startExperience()">click for well wishes</button>
            <div id="additional">
                <div id="additional-buttons">
                    <button id="share-button" onmouseenter="dandyDayController.showLabel(this)" onmouseleave="dandyDayController.hideLabel(this)" onclick="dandyDayController.showShare()">share</button>
                    <button id="quotes-button" onmouseenter="dandyDayController.showLabel(this)" onmouseleave="dandyDayController.hideLabel(this)" onclick="dandyDayController.showQuote()">quote</button>
                    <button id="faq-button" onmouseenter="dandyDayController.showLabel(this)" onmouseleave="dandyDayController.hideLabel(this)" onclick="dandyDayController.showFaq()">faq</button>
                    <button id="about-button" onmouseenter="dandyDayController.showLabel(this)" onmouseleave="dandyDayController.hideLabel(this)" onclick="dandyDayController.showAbout()">about</button>
                </div>
                <div id="additional-info">
                    <label for="share-button" class="hide">share this site to brighten someone else's day</label>
                    <label for="quotes-button" class="hide">get a fun quote from Dandy Dan himself</label>
                    <label for="faq-button" class="hide">view the frequently asked questions</label>
                    <label for="about-button" class="hide">view information about this site</label>
                </div>
            </div>
        </nav>
        <div id="misc-panel">
            <button id="go-back-button" onclick="dandyDayController.showSplash()">
                <svg fill="currentColor" height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                     viewBox="0 0 330 330" xml:space="preserve">
                    <path fill="currentColor" id="XMLID_224_" d="M325.606,229.393l-150.004-150C172.79,76.58,168.974,75,164.996,75c-3.979,0-7.794,1.581-10.607,4.394
                    l-149.996,150c-5.858,5.858-5.858,15.355,0,21.213c5.857,5.857,15.355,5.858,21.213,0l139.39-139.393l139.397,139.393
                    C307.322,253.536,311.161,255,315,255c3.839,0,7.678-1.464,10.607-4.394C331.464,244.748,331.464,235.251,325.606,229.393z"/>
                </svg>
            </button>
            <section id="quote-section" class="hide">
                <blockquote>
                    The day is looking to be quite dandy indeed!
                </blockquote>
                <div></div>
                <div id="quote-dandy-dan" >
                    <img src="image/smile.png" alt="A smiling man wearing a bowling hat, a rainbow plaid blazer, and a fake moustache gives two thumbs up.">
                </div>
            </section>
            <section id="faq-section" class="hide">
                <h3>frequently asked questions</h3>

                <h6>What am I looking at?</h6>
                <p>
                    A website that wishes a dandy day to everyone who visits.
                </p>

                <h6>Why does this exist?</h6>
                <p>
                    I thought it would be funny.
                </p>

                <h6>Who is Dandy Dan?</h6>
                <p>
                    The dandiest man on the internet.
                </p>

                <h6>My day isn't that dandy. What should I do?</h6>
                <p>
                    Go experience Dandy Dan and his dandy song. Maybe it will help turn your day around.
                </p>

                <h6>My day is already too dandy to handle. What should I do?</h6>
                <p>
                    Think long and hard before you experience Dandy Dan and his dandy song. That much dandiness may be dangerous.
                </p>

                <h6>What am I supposed to do after I watch this?</h6>
                <p>
                    The possibilities are truly endless.
                </p>
                <ul>
                    <li>Continue going about your day.</li>
                    <li>Watch it again.</li>
                    <li>Send it to someone else so that they can watch it.</li>
                    <li>Look back on your life and ponder the long chain of events that have led you to the point where you are reading this FAQ.</li>
                    <li>All of the above.</li>
                    <li>None of the above.</li>
                </ul>
            </section>
            <section id="about-section" class="hide">
                <p>
                    Created, designed, and developed by <a href="https://www.linkedin.com/in/shaun-wickett-759b2b93/" target="_blank" rel="noopener noreferrer">Shaun Wickett</a>.
                </p>
                <p>
                    Original lyrics and music by <a href="https://www.fiverr.com/sswinnerton" target="_blank" rel="noopener noreferrer">Sam Swinnerton</a>.
                </p>
                <br/>
                <p style="font-style: italic">
                    This website does not use cookies or collect, store, or share any user data.
                </p>
            </section>
        </div>
    </main>
    <div id="top-panel" class="background-container">
        <h1 id="greeting" class="shimmer">
            <span class="word" id="have">Have</span>
            <span class="word" id="a">A</span>
            <span class="word" id="dan">Dan</span><span class="word" id="dy">dy</span>
            <span class="word" id="day">Day!</span>
        </h1>
    </div>
    <div id="dandy-dan">
        <img class="dance" src="image/smile.png" alt="A smiling man wearing a bowling hat, a rainbow plaid blazer, and a fake moustache gives two thumbs up.">
    </div>
    <div id="bottom-panel" class="background-container">
        <div id="progress-bar">
            <div id="progress-value">
            </div>
        </div>
    </div>
    <div class="bg right"></div>
    <div class="bg right bg2"></div>
    <div class="bg right bg3"></div>
    <div class="bg left"></div>
    <div class="bg left bg4"></div>
    <div class="bg left bg5"></div>
    <audio id="jingle" preload="auto" onended="dandyDayController.stopExperience()" ontimeupdate="dandyDayController.handleAudioTimeUpdate()">
        <source src="audio/jingle.mp3" type="audio/mpeg" />
    </audio>
</body>
</html>